% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ss2Continuous.R
\name{ss2Continuous}
\alias{ss2Continuous}
\title{Sample Size Calculation for Two Co-Primary Continuous Endpoints}
\usage{
ss2Continuous(
  delta1,
  delta2,
  sd1,
  sd2,
  rho,
  r,
  alpha,
  beta,
  known_var = TRUE,
  nMC = 10000
)
}
\arguments{
\item{delta1}{Mean difference for the first endpoint (group 1 - group 2)}

\item{delta2}{Mean difference for the second endpoint (group 1 - group 2)}

\item{sd1}{Common standard deviation for the first endpoint}

\item{sd2}{Common standard deviation for the second endpoint}

\item{rho}{Common correlation between the two outcomes}

\item{r}{Allocation ratio n1/n2 where n1 is sample size for group 1}

\item{alpha}{One-sided significance level (typically 0.025 or 0.05)}

\item{beta}{Type II error rate (typically 0.1 or 0.2). Power = 1 - beta}

\item{known_var}{Logical value indicating whether variance is known (TRUE) or
unknown (FALSE). If TRUE, linear extrapolation is used; if FALSE, sequential
search is used for sample size determination}

\item{nMC}{Number of Monte Carlo simulations when known_var = FALSE (default is 10000)}
}
\value{
A data frame with the following columns:
\item{delta1}{Mean difference for endpoint 1}
\item{delta2}{Mean difference for endpoint 2}
\item{sd1}{Standard deviation for endpoint 1}
\item{sd2}{Standard deviation for endpoint 2}
\item{rho}{Correlation between endpoints}
\item{r}{Allocation ratio}
\item{alpha}{One-sided significance level}
\item{beta}{Type II error rate}
\item{known_var}{Variance assumption}
\item{nMC}{Number of Monte Carlo simulations (NA if known_var = TRUE)}
\item{n1}{Required sample size for group 1}
\item{n2}{Required sample size for group 2}
\item{n}{Total sample size (n1 + n2)}
}
\description{
Determines the sample size for a two-arm superiority trial with two co-primary
continuous endpoints, to achieve a specified power at a given significance level.
}
\details{
This function uses two different approaches depending on the variance assumption:

\strong{Known Variance:} Uses linear extrapolation algorithm for efficient sample size
determination. The algorithm iteratively refines the sample size estimate:

\strong{Step 1:} Initialize with sample sizes from single endpoint formulas

\strong{Step 2:} Set upper bound using adjusted power

\strong{Step 3-4:} Iteratively refine using linear extrapolation:
\deqn{n_2^{new} = \frac{n_2^{(0)}(power^{(1)} - (1-\beta)) - n_2^{(1)}(power^{(0)} - (1-\beta))}
      {power^{(1)} - power^{(0)}}}

The algorithm converges when \eqn{n_2^{(1)} = n_2^{(0)}}.

\strong{Unknown Variance:} Uses sequential search, as Monte Carlo simulation has random
variation that can prevent reliable convergence with linear extrapolation.
This approach is more stable for Monte Carlo simulation where power estimates have
random variation.

For known variance, the standardized test statistics are:
\deqn{Z_k = \frac{\delta_k}{\sigma_k \sqrt{1/n_1 + 1/n_2}}}
For unknown variance, t-statistics with \eqn{\nu = n_1 + n_2 - 2} degrees of
freedom are used, and power is calculated using Monte Carlo simulation following
Sozu et al. (2011).
}
\examples{
# Example 1: Known variance with rho = 0.5 (Table 1 in Sozu et al. 2011)
ss2Continuous(
  delta1 = 0.2,
  delta2 = 0.2,
  sd1 = 1,
  sd2 = 1,
  rho = 0.5,
  r = 1,
  alpha = 0.025,
  beta = 0.2,
  known_var = TRUE
)

# Example 2: Known variance with unequal allocation
ss2Continuous(
  delta1 = 0.3,
  delta2 = 0.25,
  sd1 = 1,
  sd2 = 1,
  rho = 0.3,
  r = 2,
  alpha = 0.025,
  beta = 0.2,
  known_var = TRUE
)

\donttest{
# Example 3: Unknown variance (uses sequential search)
ss2Continuous(
  delta1 = 0.5,
  delta2 = 0.4,
  sd1 = 1,
  sd2 = 1,
  rho = 0.4,
  r = 1,
  alpha = 0.025,
  beta = 0.1,
  known_var = FALSE,
  nMC = 10000
)
}

}
\references{
Sozu, T., Sugimoto, T., & Hamasaki, T. (2011). Sample size determination in
superiority clinical trials with multiple co-primary correlated endpoints.
\emph{Journal of Biopharmaceutical Statistics}, 21(4), 650-668.
}
