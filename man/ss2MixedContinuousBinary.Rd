% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ss2MixedContinuousBinary.R
\name{ss2MixedContinuousBinary}
\alias{ss2MixedContinuousBinary}
\title{Sample Size Calculation for Two Co-Primary Endpoints: One Continuous and One Binary}
\usage{
ss2MixedContinuousBinary(
  delta,
  sd,
  p1,
  p2,
  rho,
  r,
  alpha,
  beta,
  Test,
  nMC = 10000
)
}
\arguments{
\item{delta}{Mean difference for the continuous endpoint (group 1 - group 2)}

\item{sd}{Common standard deviation for the continuous endpoint}

\item{p1}{Probability of response in group 1 for the binary endpoint (0 < p1 < 1)}

\item{p2}{Probability of response in group 2 for the binary endpoint (0 < p2 < 1)}

\item{rho}{Biserial correlation between the latent continuous variable underlying
the binary endpoint and the observed continuous endpoint}

\item{r}{Allocation ratio n1/n2 where n1 is sample size for group 1}

\item{alpha}{One-sided significance level (typically 0.025 or 0.05)}

\item{beta}{Type II error rate (typically 0.1 or 0.2). Power = 1 - beta}

\item{Test}{Statistical testing method for the binary endpoint. One of:
\itemize{
\item \code{"AN"}: Asymptotic normal method without continuity correction
\item \code{"ANc"}: Asymptotic normal method with continuity correction
\item \code{"AS"}: Arcsine method without continuity correction
\item \code{"ASc"}: Arcsine method with continuity correction
\item \code{"Fisher"}: Fisher's exact test (uses sequential search)
}}

\item{nMC}{Number of Monte Carlo replications when Test = "Fisher" (default: 10000)}
}
\value{
A data frame with the following columns:
\item{delta}{Mean difference for continuous endpoint}
\item{sd}{Standard deviation for continuous endpoint}
\item{p1}{Response probability in group 1 for binary endpoint}
\item{p2}{Response probability in group 2 for binary endpoint}
\item{rho}{Biserial correlation}
\item{r}{Allocation ratio}
\item{alpha}{One-sided significance level}
\item{beta}{Type II error rate}
\item{Test}{Testing method used for binary endpoint}
\item{n1}{Required sample size for group 1}
\item{n2}{Required sample size for group 2}
\item{n}{Total sample size (n1 + n2)}
}
\description{
Determines the sample size for a two-arm superiority trial with two co-primary
endpoints where one is continuous and one is binary, to achieve a specified
power at a given significance level. This function is specifically designed
for mixed continuous-binary endpoint combinations.
}
\details{
This function implements the sample size calculation for mixed continuous-binary
co-primary endpoints following the methodology in Sozu et al. (2012).

\strong{Endpoint Types:}
\itemize{
\item \strong{Continuous Endpoint}: Analyzed using t-test for comparing means
\item \strong{Binary Endpoint}: Analyzed using one of several methods (AN, ANc, AS, ASc, or Fisher)
}

\strong{Biserial Correlation Model:}
The binary endpoint is assumed to arise from dichotomizing a latent continuous
variable at a threshold. The correlation parameter rho represents the biserial
correlation between the observed continuous endpoint and this latent continuous
variable underlying the binary endpoint.

\strong{Algorithm:}

For methods AN, ANc, AS, and ASc, linear extrapolation algorithm is used:

\strong{Step 1:} Initialize with sample sizes from single endpoint formulas

\strong{Step 2-4:} Iteratively refine using linear extrapolation:
\deqn{n_2^{new} = \frac{n_2^{(0)}(power^{(1)} - (1-\beta)) - n_2^{(1)}(power^{(0)} - (1-\beta))}
      {power^{(1)} - power^{(0)}}}

The algorithm converges when \eqn{n_2^{(1)} = n_2^{(0)}}.

For Fisher's exact test, sequential search is used instead, as Monte Carlo
simulation has random variation that can prevent reliable convergence with
linear extrapolation.
}
\examples{
# Example 1: Based on PREMIER study (Table 2 in Sozu et al. 2012)
# mTSS (continuous) and ACR50 (binary) with rho = 0.5
ss2MixedContinuousBinary(
  delta = 4.4,
  sd = 19.0,
  p1 = 0.59,
  p2 = 0.46,
  rho = 0.5,
  r = 1,
  alpha = 0.025,
  beta = 0.2,
  Test = "AN"
)

# Example 2: With continuity correction
ss2MixedContinuousBinary(
  delta = 5.0,
  sd = 20.0,
  p1 = 0.65,
  p2 = 0.50,
  rho = 0.3,
  r = 1,
  alpha = 0.025,
  beta = 0.1,
  Test = "ANc"
)

# Example 3: Arcsine transformation
ss2MixedContinuousBinary(
  delta = 4.5,
  sd = 18.0,
  p1 = 0.70,
  p2 = 0.55,
  rho = 0.4,
  r = 1,
  alpha = 0.025,
  beta = 0.1,
  Test = "AS"
)

# Example 4: Unequal allocation
ss2MixedContinuousBinary(
  delta = 0.3,
  sd = 1.0,
  p1 = 0.6,
  p2 = 0.4,
  rho = 0.5,
  r = 2,
  alpha = 0.025,
  beta = 0.1,
  Test = "AS"
)

\donttest{
# Example 5: Fisher's exact test (uses sequential search, computationally intensive)
set.seed(12345)
ss2MixedContinuousBinary(
  delta = 0.5,
  sd = 1.0,
  p1 = 0.4,
  p2 = 0.2,
  rho = 0.3,
  r = 1,
  alpha = 0.025,
  beta = 0.1,
  Test = "Fisher",
  nMC = 10000
)
}

}
\references{
Sozu, T., Sugimoto, T., & Hamasaki, T. (2012). Sample size determination in
clinical trials with multiple co-primary endpoints including mixed continuous
and binary variables. \emph{Biometrical Journal}, 54(5), 716-729.
}
